<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Video - UTube.com</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background-color: #f9f9f9;
        }

        .video-card {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.08);
        }

        .format-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            transition: 0.2s;
        }

        .format-card:hover {
            background: #f1f1f1;
            transform: scale(1.02);
        }

        .download-btn {
            border-radius: 20px;
        }
    </style>
</head>

<body>

    <!-- Header fragment -->
    <div th:replace="~{fragments/header :: header}"></div>

    <!-- Main Body -->
    <div class="container py-3">
        <div class="video-card">
            <div class="row align-items-center">
                <div class="col-md-4 text-center">
                    <img th:src="${videoInfo.thumbnail}" alt="Video Thumbnail" class="img-fluid rounded">
                </div>
                <div class="col-md-8 py-2">
                    <h4 th:text="${videoInfo.title} ?: 'Sample Video Title - Dummy Data'"></h4>
                    <p><strong>Duration:</strong> <span th:text="${videoInfo.duration} ?: '12:34 Minutes'"></span></p>
                    <p><strong>Views:</strong> <span th:text="${videoInfo.views} ?: '1,234,567'"></span>
                    </p>
                    <p><strong>Channel:</strong> <span th:text="${videoInfo.channel} ?: 'Demo Channel Name'"></span></p>
                </div>
            </div>

            <hr class="my-4">

            <h5>Choose Format to Download:</h5>
            <div class="row g-3 mt-3">
                <!-- for audio -->
                <div class="col-md-6">
                    <div class="format-card">
                        <h6 th:text="${'MP3 - AUDIO'}">
                        </h6>
                        <p>Size:
                            <span th:text="${videoInfo.audio.fileSize != null ? 
                (videoInfo.audio.fileSize >= 1024*1024*1024 ? (videoInfo.audio.fileSize/1024/1024/1024) + ' GB' 
                : (videoInfo.audio.fileSize/1024/1024) + ' MB') : 'Unknown'}"></span>
                        </p>

                        <!-- download button -->
                        <a th:if="${videoInfo.audio!=null}" th:href="@{${videoInfo.audio.downloadUrl}}"
                            class="btn btn-success download-btn w-100">
                            Download Audio
                        </a>
                    </div>
                </div>

                <div class="col-md-6" th:each="q : ${videoInfo.videoFormats}">
                    <div class="format-card">
                        <h6 th:text="${q.ext.toUpperCase()}">
                        </h6>
                        <p>Size:
                            <span th:text="${q.fileSize != null ? 
                (q.fileSize >= 1024*1024*1024 ? (q.fileSize/1024/1024/1024) + ' GB' 
                : (q.fileSize/1024/1024) + ' MB') : 'Unknown'}"></span>
                        </p>

                        <!-- Video download button -->
                        <a th:href="@{${q.downloadUrl}}" class="btn btn-danger download-btn w-100">
                            Download Video
                        </a>
                    </div>
                </div>

            </div>
        </div>

        <!-- About Website Section -->
        <section class="about-website py-3 bg-light">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <h3 class="fw-bold mb-3">About UTube.com</h3>
                        <p class="text-muted">
                            UTube.com is a fast and simple tool that helps you download your favorite YouTube videos and
                            convert them into multiple formats like MP4 and MP3.
                            Our service is completely free and works across devices including mobile, tablet, and
                            desktop.
                        </p>
                        <p class="text-muted">
                            Whether you want to save a music video, lecture, or your favorite vlogs, UTube.com makes it
                            quick and easy.
                            Just paste the link, click download, and enjoy your video offline anytime.
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer fragment -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>